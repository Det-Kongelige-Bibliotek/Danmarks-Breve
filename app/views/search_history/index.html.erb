<div id="content" class="container">
  <div class="page-header">
    <h1 class='page-heading'><span class="glyphicon glyphicon-repeat"></span> <%=t('blacklight.search_history.title')%></h1>
  </div>

<%- if @searches.blank? -%>
  <p class='section-heading lead'><%=t('blacklight.search_history.no_history')%></p>
<%- else -%>
    <%= link_to t('blacklight.search_history.clear.action_title'), clear_search_history_path, :method => :delete, :data => { :confirm => t('blacklight.search_history.clear.action_confirm') }, :class => 'btn btn-danger pull-right' %>
  <h3 class='section-heading'><%=t('blacklight.search_history.recent')%></h3>
  <table class="table table-striped search_history">
    <%-  @searches.each_with_index do |search,index| -%>
    <%= content_tag :tr, :id => "document_#{index + 1}" do %>
      <td class="query"><%= link_to_previous_search(search.query_params) %></td>
      <%- if has_user_authentication_provider? -%>
        <td class="actions text-right">
          <%- if current_or_guest_user && search.saved? -%>
            <%= button_to t('blacklight.search_history.forget'), forget_search_path(search.id), :class => 'btn btn-danger' %>
          <%- else -%>
            <%= button_to save_search_path(search.id), :method => :put, :class => 'btn btn-success' do %>
                  <span><%=t('blacklight.search_history.save') %></span>
            <% end %>
          <%- end -%>

        </td>
      <%- end -%>
    <% end #content_tag %>
  <%- end -%>
  </table>
<%- end -%>
</div>
